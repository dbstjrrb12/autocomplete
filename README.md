# autocomplete

## ⚙️ 프로젝트 다운로드 및 실행 방법

```bash
$ git clone https://github.com/dbstjrrb12/autocomplete.git
$ cd autocomplete

$ npm install
$ npm start
```

## 📚 프로젝트 구현 사항

### 📝 컴포넌트 추상화 - 클로저로 구현

    컴포넌트는 기본적으로 상태를 가지고 있으며, 해당 상태를 변경하는 함수와 상태에 따라 랜더링을 하는 함수로 나뉘어 있다고 생각하여 컴포넌트에 해당 사항을 구현하였습니다.

    저는 컴포넌트를 만들기 위해 다음과 같은 이유로 `클로저`를 활용했습니다.

    * 안전한 상태 관리 : 컴포넌트는 기본적으로 객체이므로 인스터스를 만들게 되면, 생성자 함수 내부에 선언된 상태의 경우 외부에서 접근 가능한 public 상태가 됩니다. 이는 상태가 의도치 않게 외부에서 변경될 수 있는 위험이 있으므로, 오직 setState 함수를 이용해서 상태에 접근할 수 있도록 만드는 것이 안전하다고 판단했습니다.

    * 응집성 : 물론 ESM 방식의 경우, 각 모듈 마다 고유한 스코프를 가지기 때문에 굳이 클로저를 활용하지 않아도 됩니다. 하지만 응집성 관점에서 하나의 파일에 관심사에 따라 코드가 하나의 코드 블록으로 묶이는 것이 가독성 측면에서 더 유리하다고 판단했습니다.

### 📝 포커싱 구현 - 키보드 트랩 및 접근성을 곁들인

    input element에 키보드 이벤트를 주어, 현재 탐색하고 있는 요소의 id 값을 변경하여 해당 id 값을 가지고 있는 요소의 배경색을 변경하였습니다.

    이러한 방식은 단순히 시각적인 피드백을 주는데 그치지 않고 저시력자 등 스크린 리더를 활용해야 하는 사용자를 배려할 수 있도록 설계하였습니다.

    aria-activedescendant 속성을 input 요소에 부여하고, aria-owns로 연경된 ul 요소 하단의 li 요소 마다 id의 값을 aria-activedescendant값과 동일하게 변경하면, 스크린리더가 해당 영역이 현재 선택되었음을 인지할 수 있습니다.

    aria-expanded 속성을 두어, 현재 검색한 검색어에 해당하는 자동완성 검색어가 있다면 리스트가 현재 펼쳐져 있는지 여부를 알려주었습니다. (마찬가지로 포커스 인/아웃의 경우에 해당 aria 속성을 변경하였습니다)

### 📝 컴포넌트 간 의존도 줄이기

    저는 Autocomplete와 SearchList는 독립적인 컴포넌트로 구분하였습니다. 하나의 컴포넌트로 관리하는 것보다 코드가 간결해지고 유지 보수 및 확장성에 관점에서 더 유리하다고 판단하였습니다.

    두 컴포넌트 간의 의존도를 줄이기 위해, 각 컴포넌트에서 직접 다른 컴포넌트를 참조하지 않고 상위의 컴포넌트로 묶어 의존성을 줄였습니다. 따라서 직접 서로 참조하지 않고 상위 컴포넌트에서 전달한 함수를 받아 사용할 수 있도록 구현했습니다.

### 💡 그 외에 신경 쓴 부분 사항

- 디바운스를 이용해 API 바로 호출하지 않도록 구현

- `serviceWorker & cache API` 를 이용해 caching 구현

## 🧰 프로젝트 시 겪은 문제 & 해결 방법

### 한글 입력 시, keydown 이벤트 중복 발생

`(문제 상황)` input 요소에 한글을 입력하고 방향키를 입력할 경우, 이벤트가 중복으로 발생하여 잘못된 자동완성 검색어가 선택됨

`(문제 원인)` keydown의 경우, IME (한글, 중국어 및 일본어 등을 사용할 수 있도록 단어 조합을 제공하는 어플리케이션) composition 과정에서 실행되므로 한글과 같은 언어를 입력하는 composition 과정에서 keydown 이벤트가 중복으로 발생할 수 있음

`(해결 방법)` 이벤트 객체 내부에 존재하는 isComposing이라는 프로퍼티가 true면 아직 composition 과정이므로 이벤트를 무시하도록 방어 코드 작성

### ArrowUp의 경우, 커서 이동

`(문제 상황)` 위(↑) 화살표를 누를 경우, 커서의 위치가 변동하여 사용성 저해

`(문제 원인)` 화살표 이벤트의 기본 동작

`(해결 방법)` 위로 가는 화살표를 누를 경우, 해당 이벤트의 기본 동작을 수행하지 않도록 preventDefault 함수를 실행함
